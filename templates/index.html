<!DOCTYPE html>
<html>
<title>Marketing Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4 {font-family:"Lato", sans-serif}
.mySlides {display:none}
.w3-tag, .fa {cursor:pointer}
.w3-tag {height:15px;width:15px;padding:0;margin-top:6px}
</style>
<script>
    const webSocket = new WebSocket("ws://localhost:8888/websocket/");
    const app = {
        numSuccesses: 0,
        numTrials: 0
    }
    webSocket.onopen = (event) => {
        console.log(webSocket);
        console.log('webSocket.onopen fired')
        webSocket.send("Hello? Is anyone there?");
    }
    webSocket.onmessage = (event) => {
        if (!`${event.data}`.startsWith('You said')) {
            const data = +event.data;
            
            app.numSuccesses += data;
            app.numTrials += 1

            const alpha = 2 + app.numSuccesses;
            const beta = 2 + app.numTrials - app.numSuccesses;
            const mean = app.numSuccesses / app.numTrials;
            console.log(`α = ${alpha}; β = ${beta}; mean = ${mean}`);
            const temperatureLabel = document.getElementById("temperatureLabel");
            const temperatureUnit = document.getElementById("temperatureUnit");
            const humidityLabel = document.getElementById("humidityLabel");
            temperatureLabel.textContent = alpha
            humidityLabel.textContent = beta
        }
        else {
            console.log(event.data)
        }
    }

    webSocket.onclose = (event) => {
        console.log('webSocket.onclose fired')
    }
    webSocket.onerror = (event) => {
        console.log('webSocket.onerror fired')
    }
</script>
<body>

<!-- Links (sit on top) -->
<div class="w3-top">
  <div class="w3-row w3-large w3-light-grey">
    <div class="w3-col s3">
      <span>{{ _("temperature") }}</span> <span id="temperatureLabel"></span>°<span id="temperatureUnit">F</span>
    </div>
    <div class="w3-col s3">
      <span>{{ _("humidity") }}</span> <span id="humidityLabel"></span>%
    </div>
  </div>
</div>
</body>
</html>